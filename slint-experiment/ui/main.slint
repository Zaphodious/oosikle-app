import { AboutSlint, Button, VerticalBox, ListView, ScrollView, HorizontalBox } from "std-widgets.slint";
import { PlistSelectorDemo } from "plistdemo.slint";
import {DeviceDisplay, ActionItem, DemoData} from "datamodel.slint";
import {TButton} from "stylebutton.slint";
import {OStyle} from "styleglobal.slint";

// https://lospec.com/palette-list/pico-8

export component MainLayoutDemo inherits Window {
    no-frame: false;
    in-out property <DeviceDisplay> active_device: DemoData.active_device;
    in property <[DeviceDisplay]> devices: DemoData.devices;
    in property <[string]> playlists: DemoData.playlists;
    always-on-top: false;
    in-out property <bool> commander_pane_minimized: false;
    full-screen: false;
    background: darkolivegreen;
    HorizontalLayout {
        alignment: stretch;
        Rectangle {
            // Placeholder
            width: OStyle.panes.devices.width;
        }

        VerticalLayout {
            width: 200px;
            VerticalLayout {
                alignment: LayoutAlignment.start;
                height: 250px;
                horizontal-stretch: 0;
                HorizontalLayout {
                    alignment: center;
                    padding: 15px;
                    Rectangle {
                        height: 140px;
                        width: 70px;
                        Image {
                            source: active_device.icon;
                            height: 100%;
                            image-rendering: ImageRendering.smooth;
                        }
                    }
                }

                Rectangle {
                    height: 5px;
                    background: green;
                    Text {
                        text: active_device.name;
                        color: white;
                        font-size: 18pt;
                        width: 100%;
                        wrap: word-wrap;
                        horizontal-alignment: center;
                    }
                }
            }


            Rectangle {
                background: blue;
                ScrollView {
                        PlistSelectorDemo {
                            folders : active_device.playlists;
                        }
                }
            }
        }

        VerticalLayout {
            alignment: stretch;
            Rectangle {
                height: 40px;
                background: yellow;
                HorizontalLayout {
                    alignment: LayoutAlignment.space-between;
                    horizontal-stretch: 0.5;
                    Rectangle {
                        background: grey;
                        width: 10px;
                    }

                    Rectangle {
                        background: white;
                        HorizontalLayout {
                            spacing: 7px;
                            Rectangle {
                                background: lightblue;
                                border-radius: 25px;
                                width: 40px;
                                padding: 10px;
                                TouchArea {
                                    Image {
                                        source: @image-url("testing_icons/Solar-Outline/Video, Audio, Sound/Skip Previous.svg");
                                    }
                                }
                            }
                            Rectangle {
                                TouchArea {
                                    Image {
                                        source: @image-url("testing_icons/Solar-Outline/Video, Audio, Sound/Play.svg");
                                    }
                                }
                            }
                            Rectangle {
                                TouchArea {
                                    Image {
                                        source: @image-url("testing_icons/Solar-Outline/Video, Audio, Sound/Skip Next.svg");
                                    }
                                }
                            }
                            Rectangle {
                                TouchArea {
                                    Image {
                                        source: @image-url("testing_icons/Solar-Outline/Video, Audio, Sound/Stop.svg");
                                    }
                                }
                            }
                        }
                    }

                    Rectangle {
                        width: 10px;
                        background: black;
                    }
                }
            }

            Rectangle {
                background: teal;
                height: 200px;
            }

            Rectangle {
                background: goldenrod;
                height: 10px;
            }

            Rectangle {
                background: purple;
                min-width: 16px;
                min-height: 16px; 
                /* @lsp:ignore-node */ 
            }
        }
    }

    area := TouchArea {
        x: 0;
        y: 0;
        height: 100%;
        width: self.has-hover ? 170px : OStyle.panes.devices.width;
        animate width {
            easing: ease-out-expo;
            duration: 0.35s;
            delay: 0.05s;
        }
        ScrollView {
            Rectangle {
                background: OStyle.panes.devices.background-brush;
                border-width: OStyle.panes.devices.border-width;
                border-color: OStyle.panes.devices.border-brush;
                border-radius: OStyle.panes.devices.border-radius;
                padding: OStyle.panes.devices.padding;
            }

            VerticalLayout {
                x: 0;
                y: 0;
                alignment: start;
                width: 100%;
                height: 100%;
                for x in devices: TButton {
                    HorizontalLayout {
                        padding: 10px;
                            Image {
                                source: x.icon;
                                height: 40px;
                                width: 40px;
                                image-rendering: smooth;
                                
                                //width: 45px;
                                //colorize: x.enabled ? white : grey;
                            }
                        Text {
                            //x: 65px;
                            opacity: area.has_hover ? 100% : 0%;
                            horizontal-alignment: left;
                            text: x.name;
                            wrap: word-wrap;
                            //color: (x.id == active_device.id) ? black : white;
                            color: black;
                            animate opacity {
                                easing: ease-out-sine;
                                duration: 0.15s;
                                delay: 0.05s;
                                direction: alternate;
                            }

                    }
                        }
                }
                /*Rectangle {
                    //background: x.enabled ? (x.id == active_device.id ? pink : purple) : (x.id == active_device.id ? lightgray : darkgray);
                    padding: 5px;
                    height: 40px;
                    width: 100%;
                    animate background {
                        easing: ease-out-quint;
                        duration: 0.5s;
                    }
                    indiv_area := TButton {
                        width: 100%;
                        height: 40px;
                        highlighted: active_device.id == x.id;
                        disabled: !x.enabled;
                        clicked => {
                            active_device = x;
                        }
                        Rectangle {
                            Image {
                                x: 6px;
                                y: 6.px;
                                source: x.icon;
                                height: 25px;
                                image-rendering: smooth;
                                
                                //width: 45px;
                                //colorize: x.enabled ? white : grey;
                            }

                        }

                        Text {
                            x: 65px;
                            opacity: area.has_hover ? 100% : 0%;
                            horizontal-alignment: left;
                            text: x.name;
                            wrap: word-wrap;
                            //color: (x.id == active_device.id) ? black : white;
                            color: black;
                            animate opacity {
                                easing: ease-out-sine;
                                duration: 0.15s;
                                delay: 0.05s;
                                direction: alternate;
                            }
                        }
            }
                }*/
            }
        }
    }
}
