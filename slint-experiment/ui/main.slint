import { AboutSlint, Button, VerticalBox, ListView, ScrollView, HorizontalBox } from "std-widgets.slint";

export struct DeviceDisplay {
    id: string,
    name: string,
    enabled: bool,
    icon: image,
}

component DeviceButton {
    in property <DeviceDisplay> device;
    Rectangle {
        background: aqua;
        border-width: 2px;
        border-color: black;
        Text {
            text: device.name;
        }
    }
}

export component MainLayoutDemo inherits Window {
    no-frame: false;
    in property <[DeviceDisplay]> devices: [
        {
            id: "pc",
            name: "This PC",
            enabled: true,
            icon: @image-url("testing_icons/game_whole.svg")
        },
        {
            id: "a301",
            name: "Miyoo A30",
            enabled: true,
            icon: @image-url("testing_icons/game_whole.svg")
        },
        {
            id: "ipod1",
            name: "Apple iPod 5G",
            enabled: true,
            icon: @image-url("testing_icons/game_whole.svg")
        },
        {
            id: "sd1",
            name: "Generic SD Card",
            enabled: false,
            icon: @image-url("testing_icons/game_whole.svg")
        },
        {
            id: "kindle1",
            name: "Amazon Kindle",
            enabled: true,
            icon: @image-url("testing_icons/game_whole.svg")
        },
    ];
    in property <[string]> playlists: ["foo", "bar", "zip", "zap"];
    always-on-top: false;
    in-out property <bool> commander_pane_minimized: false;
    full-screen: false;
    HorizontalLayout {
        alignment: stretch;
        Rectangle {
            // Placeholder
            width: 60px;
        }

        VerticalLayout {
            width: 200px;
            Rectangle {
                height: 150px;
                background: green;
            }

            Rectangle {
                background: blue;
                ScrollView {
                    ListView {
                        for x in playlists: Text {
                            text: x;
                        }
                    }
                }
            }
        }

        VerticalLayout {
            alignment: stretch;
            Rectangle {
                height: 50px;
                background: yellow;
                HorizontalLayout {
                    alignment: LayoutAlignment.space-between;
                    horizontal-stretch: 0.5;
                    Rectangle {
                        background: grey;
                        width: 10px;
                    }

                    Rectangle {
                        background: black;
                        width: 10px;
                    }

                    Rectangle {
                        width: 10px;
                        background: white;
                    }
                }
            }

            Rectangle {
                background: teal;
                height: 200px;
            }

            Rectangle {
                background: goldenrod;
                height: 10px;
            }

            Rectangle {
                background: purple;
                min-width: 16px;
                min-height: 16px; 
                /* @lsp:ignore-node */ 
            }
        }
    }

    area := TouchArea {
        x: 0;
        y: 0;
        height: 100%;
        width: self.has-hover ? 170px : 60px;
        animate width {
            easing: ease-out-expo;
            duration: 0.35s;
            delay: 0.05s;
        }
        ScrollView {
            Rectangle {
                background: pink;
            }

            VerticalLayout {
                x: 0;
                y: 0;
                alignment: start;
                width: 100%;
                height: 100%;
                for x in devices: Rectangle {
                    background: x.enabled ? purple : darkgray;
                    border-width: 3px;
                    border-color: black;
                    height: 50px;
                    TouchArea {
                        mouse-cursor: pointer;
                        Image {
                            x: 7.5px;
                            source: x.icon;
                            width: 45px;
                            colorize: x.enabled ? white : grey;
                        }

                        Text {
                            x: 65px;
                            opacity: area.has_hover ? 100% : 0%;
                            horizontal-alignment: left;
                            text: x.name;
                            wrap: word-wrap;
                            animate opacity {
                                easing: ease-out-sine;
                                duration: 0.15s;
                                delay: 0.05s;
                                direction: alternate;
                            }
                        }
                    }
                }
            }
        }
    }
}
