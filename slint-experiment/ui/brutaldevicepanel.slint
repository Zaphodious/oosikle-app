import { BrutalPanel } from "brutalpanel.slint";
import { BrutalButton } from "brutalbutton.slint";
import { BrutalLineEntry  } from "brutallineentry.slint";
import {DeviceDisplay, ActionItem, DemoData} from "datamodel.slint";
import { ScrollView } from "std-widgets.slint";

export component BrutalDevicePanel inherits BrutalPanel {
    in-out property <DeviceDisplay> active_device: DemoData.active_device;
    in property <[DeviceDisplay]> devices: DemoData.devices;
    x: 0;
    y: 0;
    width: deivce_hover_area.has-hover ? 240px : 68px;
    height: 100%;

    animate width {
        easing: ease-in-quad;
        duration: 50ms;
    }

    deivce_hover_area := TouchArea {
        width: 100%;
        ScrollView {
            width: deivce_hover_area.width;
            horizontal-scrollbar-policy: ScrollBarPolicy.always-off;
            height: deivce_hover_area.height - 10px;
        VerticalLayout {
            width: 100%;
            y: -2px;
            alignment: LayoutAlignment.start;
            for device in devices: BrutalButton {
                selectable: true;
                selected: device.id == active_device.id;
                height: 50px;
                width: deivce_hover_area.width;
                icon: device.icon;
                text: device.name;
                clicked => {
                    active_device = device;
                    }
                    
            }

            }
        }
    }
}
